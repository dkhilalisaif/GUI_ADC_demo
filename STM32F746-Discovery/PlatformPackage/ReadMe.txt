********************************************************************************
*
* E M B E D D E D   W I Z A R D   P R O J E C T
*
*                                                Copyright (c) TARA Systems GmbH
*                                    written by Paul Banach and Manfred Schweyer
*
********************************************************************************
*
* This software and related documentation ("Software") are intellectual
* property owned by TARA Systems and are copyright of TARA Systems.
* Any modification, copying, reproduction or redistribution of the Software in
* whole or in part by any means not in accordance with the End-User License
* Agreement for Embedded Wizard is expressly prohibited. The removal of this
* preamble is expressly prohibited.
*
********************************************************************************
*
* DESCRIPTION:
*
*   Embedded Wizard STM STM32 Platform Package
*   * Graphics Engine (GFX)
*   * Runtime Environment (RTE)
*
*   This directory contains the source codes and/or libraries of the components
*   Graphics Engine (GFX) and Runtime Environment (RTE) used to run a GUI
*   application generated by Embedded Wizard on the STM32 target.
*
*   This file contains a description of additional platform specific details:
*   - Platform Specific Release Notes (Version History of GFX and RTE)
*   - Supported Platforms and Color Formats
*   - Test and Verification Notes
*
*******************************************************************************/

Getting started with Embedded Wizard Studio:
--------------------------------------------
  In order to get familiar with Embedded Wizard Studio and the UI development
  work-flow, we highly recommend to study our online documentation:

  https://doc.embedded-wizard.de

  Furthermore, we have collected many 'Questions and Answers' covering
  typical Embedded Wizard programming aspects. Please visit our community:

  https://ask.embedded-wizard.de

  Please use this platform to drop your questions, answers and ideas.


Platform Specific Release Notes (Version History of GFX and RTE):
-----------------------------------------------------------------
  Please read first the Embedded Wizard Release Notes, to be informed about all
  general improvements or changes:

  https://doc.embedded-wizard.de/release-notes

  The following section contains additonal platform specific changes, related to
  Graphics Engine (GFX) or Runtime Environment (RTE):

* Version 10.00
  - Enhancement of Runtime Environment to support int64 datatypes.
  - Additional math functions added to Runtime Environment.
  - EwGetTime() has been changed to return int64 instead of uint32.
  - Bugfix in EwStringToUtf8(). Character codes greater that 0x07FF were encoded
    incorrectly in UTF-8.
  - New function EwRegisterFlashAreaReader() added to Runtime Environment.
    With this function the user can register callback to be used when
    decompressing bitmap/font pixel data from not directly accessible Flash
    memory. The callback has to load the Flash memory in blocks and return a
    pointer to the loaded memory address.

* Version 9.30
  - The Runtime Environment contains now an own optimized memory manager that
    is tailored for GUI applications on resource constraint embedded systems.
    The Embedded Wizard Heap Manager can now be used instead of TLSF.
  - The Runtime Environment supports now immediate garbage collection.
    By default this feature is disabled for compatibility reasons.
  - The Graphics Engine supports now lazy loading of bitmaps and discarding
    of bitmaps. These new features can be configured by using the new macros:
    - EW_LAZY_LOAD_BITMAPS
    - EW_LAZY_LOAD_BITMAPS_IF_ANIMATED_ONLY
    - EW_DISCARD_BITMAPS
    - EW_DISCARD_BITMAPS_IF_ANIMATED_ONLY
    - EW_DISCARD_BITMAPS_IF_NOT_USED_IN_RECENT_UPDATES
  - The meaning of the macro EW_MAX_SURFACE_CACHE_SIZE has changed due to lazy
    loading and discarding of bitmap resources. Now, EW_MAX_SURFACE_CACHE_SIZE
    defines the threshhold, when bitmaps are discarded from memory.
  - The Graphics Engine target specific files ewextgfx.c/h have been reworked:
    - Unified renaming (Gfx...)
    - The handshake with the display driver is redesigned and the new functions
      EwBspDisplayCommitBuffer() and EwBspDisplayWaitForCompletion() are used.
    - Destroying of surfaces will take care about current usage by hardware
      and flush outstanding operations.
  - The Runtime Environment target specific file ewextrte.c has been reworked:
    - The new Embedded Wizard Heap Manager is used to allocated/free memory.
    - EwGetTicks is now calling the function EwBspClockGetTicks().

* Version 9.20
  - The Graphics Engines for color format RGBA8888, RGB888 and RGB565 have
    been enhanced to support the new bitmap resource format RGB565.
  - The Graphics Engines for color format RGBA8888, RGB888, RGB565 and RGBA444
    have been enhanced to support the new bitmap resource format Index8.
  - The support for the new bitmap resource format RGB565 can be excluded from
    the Graphics Engine code by using the new define EW_DONT_USE_RGB565_SURFACES.
  - The support for the new bitmap resource format Index8 can be excluded from
    the Graphics Engine code by using the new define EW_DONT_USE_INDEX_SURFACES.
  - The new define EW_DONT_USE_DMA2D_SOFTWARE_REPLACEMENT can be used to
    remove the software drawing functions for all graphical operations that
    are supported by DMA2D. Except for demos, there is no necessity to use
    software drawing operations for hardware accelerated operations.
  - The new define EW_DONT_USE_WARP_FUNCTIONS can be used to exclude the code
    of all scale, rotate and warp functions from the Graphics Engine in order
    to reduce the code size for simple projects.
  - The dependency to printf() function is removed: The function EwFormat()
    does not exist anymore and has been removed from ewextrte.c. The function
    EwPrint() is now part of the RTE itself and implements a subset of the
    printf() format escape sequences (%d, %u, %f, %s, %c, %x, %X).
  - The new function EwConsoleOutput() has been added to the extern RTE
    module ewextrte.c. The function is used to print the given message on
    the console. No additional formatting, etc. is needed.
  - The Garbage Collector within the Embedded Wizard RunTime Environment is
    completely redesigned and operates now iterative instead of recursive.
    As a result, the necessary stack size may be reduced and the performance
    of EwReclaimMemory() is improved.

* Version 9.10
  - Support of bidirectional text. The new operations to process bidi and shaping
    can be disabled by compiling the Graphics Engine with the defined macro
    EW_DONT_USE_BIDI_FUNCTIONS.
  - Size of Issue Buffer can be changed by setting the macro EW_MAX_ISSUE_BUFFER
    within the makefile or project. By default the value is 100.
    In order to save memory (1 issue allocates 64 bytes) the size can be reduced.
    For complex vector graphics with too much edges, the buffer size can be
    increased (1 issue stores 8 edges).
  - Support of double-buffered scratch-pad buffer. This mode makes it possible
    to prepare the content of one scratch-pad buffer, while the content of the
    other scratch-padd buffer is transferred to the display.

* Version 9.00
  - Support of vector graphics. The new operations to fill and stroke paths
    can be disabled by compiling the Graphics Engine with the defined macro
    EW_DONT_USE_PATH_FUNCTIONS.

* Version 8.30.02
  - Entire set of GFX/RTE libraries are rebuild after adapting/checking for
    proper FPU settings.

* Version 8.30.01
  - GFX and RTE libraries for Cortex-M7 architecture are now built with corrected
    FPU settings for GCC toolchain (using -mfpu=fpv5-sp-d16 instead of
    -mfpu=fpv5-d16). The usage of double precision has caused a hardfault on
    F746/F756 targets when calling EwFormat() with float values.
  - Support of virtual framebuffer (width of the framebuffer can be larger than
    width of application). Used to support GFXMMU or framebuffer alignment.
  - Support for STM32L4R9 Discovery and Evalboard.

* Version 8.30
  - The limitation for max. 256 pixel font height has been increased to 1024 pixel.
    To display such large fonts the glyph cache has to be large enough.
  - Text alignment algorithms (changed with V8.20) are reworked (bug-fix).

* Version 8.20
  - Support of synchronized single buffer update by using partial display update.
    This approach makes it possible to draw directly into the visible framebuffer
    without flicker or tearing effects (as long as drawing operation is fast
    enough).
  - Renamed access to extern DMA2D graphics accelerator functionality.
  - Support of off-screen buffer is removed. Use new single buffer mode or
    double-buffering instead.
  - Usage of EW_FRAME_BUFFER_COLOR_FORMAT macros simplified.
  - Memory profiling feature is now always active - just add the function call
    EwPrintProfilierStatistics() within your main loop in case you want to get
    an overview of the current/maximum memory consumption.

* Version 8.10
  - Renaming "STM32Fx Platform Package" to "STM32 Platform Package".
  - Support of partial display updates in combination with a scratch-pad buffer,
    to reduce memory footprint dramatically. No framebuffer needed for displays
    with own graphics memory (GRAM).
    New function STM32BeginUpdateArea() for partial display update added.
  - Renamed access to realtime clock - extern EwBspGetTime() expected.
  - Renamed access to framebuffer update - extern EwBspSetFramebufferAddress()
    expected.
  - Renamed access to CLUT update - extern EwBspSetFramebufferClut() expected.

* Version 8.00.03
  - Support for STM32H743 Evalboard.
  - Support for STM32L496 Discovery board.
  - Bugfix in function RTC_GetTime() to provide realtime clock.

* Version 8.00.02
  - Fixed an issue within the software pixel driver, were the calculation of
    an alpha value was erroneous (underflow) under special conditions.
  - Bugfix in function RTC_GetTime() to provide realtime clock.
  - New function STM32FxIsDMA2DUsed() in ewextgfx.f to get the current state
    of the DMA2D usage (active/inactive).

* Version 8.00.01
  - Blending a rectangular area with a color is now accelerated by using DMA2D
    for RGBA8888, RGB888, RGBA4444 and RGB565 color formats.
  - Usage of DMA2D_INPUT_xxx and DMA2D_OUTPUT_xxx defines instead of obsolete
    color mode constants.
  - Usage of DMA2D can now be switched on and off dynamically during runtime,
    in order to see the performance difference within demo applications.
    To activate/deactivate the DMA2D during runtime use the new function
    STM32FxUseDMA2D().
  - Access of DMA2D graphics accelerator is now seperated into the file DMA2D.c
    which is part of the board configuration. The entire access to DMA2D HAL
    is now centralized within one file independent from the color format of the
    Graphics Engine.
  - DMA2D operates now in interrupt mode by default (instead of polling mode).
  - Parallel processing is now support: The preparation of the next drawing
    instruction or a parallel software drawing operation can be execuded,
    while the DMA2D is doing a hardware accelerated drawing operation.
  - Update of framebuffer is now hardware accelerated also for Graphics Engine
    operating with Index8 color format.
  - EwGetTime() calls external function RTC_GetTime() to provide realtime clock.

* Version 8.00
  - Support for STM32F412 Discovery board.
  - All dependencies to LTDC are removed from ewextgfx.c. All board specific
    configurations and functions are located within the build environment
    (BoardConfig.c).
  - Colorformat of framebuffer is now configured by using an appropriate
    define (within makefile) instead of a parameter in STM32FxInitViewport().

* Version 7.10
  - Support of STM32F769 Discovery board.
  - Support of color format RGB565: The new RGB565 Graphics Engine is able
    to draw directly into a framebuffer by using the RGB565 color format (screen
    color format). In order to support alpha blending for buffered objects and
    for image resources the native color format is RGBA8888.
  - Support of additional color format RGB888: The new RGB888 Graphics Engine
    is able to draw directly into a framebuffer by using the 24 bit RGB888 color
    format (screen color format). the native color format is still RGBA8888 in
    order to support alpha blending.

* Version 7.00
  - Support of color formats RGBA8888, RGBA4444, Index8 and LumA44
  - Bitmap resources and strings can be accessed directly from flash memory,
    in order to reduce the SDRAM/SRAM memory footprint.
  - Support of differnt screen orientations: The generated user interface
    can have a different orientation than the display / framebuffer.
  - Build environments for the different STM32Fx targets are now available.
  - Embedded Wizard Studio Evaluation Edition and STM32Fx Platform Package
    for evaluation purposes is now available.

* Version 6.60
  - New macros EW_USE_OFFSCREEN_BUFFER and EW_USE_DOUBLE_BUFFER added. They
    can be used to define the frame-buffer configuration and screen update
    behavior of the Graphics Engine.
    Please have a look to ewextgfx.c for more details.

* Version 6.51
  - Support of STM32Fx targets with Chrom-ART graphics accelerator.


Supported Platforms and Color Formats:
--------------------------------------
This Platform Package supports the following chipsets and color formats:

STM32        : STM32 platforms
  + RGBA8888 : 32 bit color format with 8 bit red, 8 bit green, 8 bit blue
               and 8 bit alpha values.
  + RGB888   : 24 bit screen color format with 8 bit red, 8 bit green and 8 bit
               blue values.
  + RGBA4444 : 16 bit color format with 4 bit red, 4 bit green, 4 bit blue
               and 4 bit alpha values.
  + RGB565   : 16 bit screen color format with 5 bit red, 6 bit green and 5 bit
               blue values.
  + Index8   : 8 bit index color format (global CLUT with up to 256 colors).
  + LumA44   : 8 bit color format with 4 bit luminance and 4 bit alpha values.


Test and Verification Notes:
----------------------------
This Platform Package Release was tested on the following environments:

Version          : 9.30
Platform Package : STM32 - RGB565 / Index8 / LumA44
Chipset          : STM32F407
Hardware         : STM32F407-Discovery with STM32F4DIS-BB and STM32F4DIS-LCD
Operating System : None / FreeRTOS
Software Tree    : STM32Cube_FW_F4 V1.24.0
Compiler/Toolset : GCC / IAR / Keil / TrueSTUDIO
Test Result      : o.k. - 14/11/19 - msy/mli

Version          : 9.30
Platform Package : STM32 - RGB565 / Index8 / LumA44
Chipset          : STM32F412
Hardware         : STM32F412-Discovery
Operating System : None / FreeRTOS
Software Tree    : STM32Cube_FW_F4 V1.24.0
Compiler/Toolset : GCC / IAR / Keil / TrueSTUDIO
Test Result      : o.k. - 14/11/19 - msy/mli

Version          : 9.30
Platform Package : STM32 - RGBA8888 / RGB888 / RGBA4444 / RGB565 / Index8 / LumA44
Chipset          : STM32F429
Hardware         : STM32F429-Discovery
Operating System : None / FreeRTOS
Software Tree    : STM32Cube_FW_F4 V1.24.0
Compiler/Toolset : GCC / IAR / Keil / TrueSTUDIO
Test Result      : o.k. - 14/11/19 - msy/mli

Version          : 9.30
Platform Package : STM32 - RGBA8888 / RGB888 / RGBA4444 / RGB565 / Index8 / LumA44
Chipset          : STM32F429
Hardware         : STM32F429-Evalboard
Operating System : None / FreeRTOS
Software Tree    : STM32Cube_FW_F4 V1.24.0
Compiler/Toolset : GCC / IAR / Keil / TrueSTUDIO
Test Result      : o.k. - 14/11/19 - msy/mli

Version          : 9.30
Platform Package : STM32 - RGBA8888 / RGB888 / RGBA4444 / RGB565 / Index8 / LumA44
Chipset          : STM32F469
Hardware         : STM32F469-Discovery
Operating System : None / FreeRTOS
Software Tree    : STM32Cube_FW_F4 V1.24.0
Compiler/Toolset : GCC / IAR / Keil / TrueSTUDIO
Test Result      : o.k. - 14/11/19 - msy/mli

Version          : 9.30
Platform Package : STM32 - RGBA8888 / RGB888 / RGBA4444 / RGB565 / Index8 / LumA44
Chipset          : STM32F469
Hardware         : STM32F469-Evalboard
Operating System : None / FreeRTOS
Software Tree    : STM32Cube_FW_F4 V1.24.0
Compiler/Toolset : GCC / IAR / Keil / TrueSTUDIO
Test Result      : o.k. - 14/11/19 - msy/mli

Version          : 9.30
Platform Package : STM32 - RGBA8888 / RGB888 / RGBA4444 / RGB565 / Index8 / LumA44
Chipset          : STM32F746
Hardware         : STM32F746-Discovery
Operating System : None / FreeRTOS
Software Tree    : STM32Cube_FW_F7 V1.15.0
Compiler/Toolset : GCC / IAR / Keil / TrueSTUDIO
Test Result      : o.k. - 14/11/19 - msy/mli

Version          : 9.30
Platform Package : STM32 - RGBA8888 / RGB888 / RGBA4444 / RGB565 / Index8 / LumA44
Chipset          : STM32F750
Hardware         : STM32F750-Discovery
Operating System : None / FreeRTOS
Software Tree    : STM32Cube_FW_F7 V1.15.0
Compiler/Toolset : GCC / IAR / Keil / TrueSTUDIO
Test Result      : o.k. - 14/11/19 - msy/mli

Version          : 9.30
Platform Package : STM32 - RGBA8888 / RGB888 / RGBA4444 / RGB565 / Index8 / LumA44
Chipset          : STM32F756
Hardware         : STM32F756-Evalboard
Operating System : None / FreeRTOS
Software Tree    : STM32Cube_FW_F7 V1.15.0
Compiler/Toolset : GCC / IAR / Keil / TrueSTUDIO
Test Result      : o.k. - 14/11/19 - msy/mli

Version          : 9.30
Platform Package : STM32 - RGBA8888 / RGB888 / RGBA4444 / RGB565 / Index8 / LumA44
Chipset          : STM32F769
Hardware         : STM32F769-Discovery
Operating System : None / FreeRTOS
Software Tree    : STM32Cube_FW_F7 V1.15.0
Compiler/Toolset : GCC / IAR / Keil / TrueSTUDIO
Test Result      : o.k. - 14/11/19 - msy/mli

Version          : 9.30
Platform Package : STM32 - RGBA8888 / RGB888 / RGBA4444 / RGB565 / Index8 / LumA44
Chipset          : STM32F769
Hardware         : STM32F769-Evalboard
Operating System : None / FreeRTOS
Software Tree    : STM32Cube_FW_F7 V1.15.0
Compiler/Toolset : GCC / IAR / Keil / TrueSTUDIO
Test Result      : o.k. - 14/11/19 - msy/mli

Version          : 9.30
Platform Package : STM32 - RGBA8888 / RGB888 / RGBA4444 / RGB565 / Index8 / LumA44
Chipset          : STM32H743
Hardware         : STM32H743-Evalboard
Operating System : None / FreeRTOS
Software Tree    : STM32Cube_FW_H7 V1.5.0
Compiler/Toolset : GCC / IAR / Keil / TrueSTUDIO
Test Result      : o.k. - 14/11/19 - msy/mli

Version          : 9.30
Platform Package : STM32 - RGBA8888 / RGB888 / RGB565 / Index8 / LumA44
Chipset          : STM32L4R9
Hardware         : STM32L4R9-Discovery
Operating System : None / FreeRTOS
Software Tree    : STM32Cube_FW_L4 V1.14.0
Compiler/Toolset : GCC / IAR / Keil / TrueSTUDIO
Test Result      : o.k. - 14/11/19 - msy/mli

Version          : 9.30
Platform Package : STM32 - RGBA8888 / RGB888 / RGB565 / Index8 / LumA44
Chipset          : STM32L4R9-MB1314
Hardware         : STM32L4R9-MB1314-Evalboard
Operating System : None / FreeRTOS
Software Tree    : STM32Cube_FW_L4 V1.14.0
Compiler/Toolset : GCC / IAR / Keil / TrueSTUDIO
Test Result      : o.k. - 14/11/19 - msy/mli

Version          : 9.30
Platform Package : STM32 - RGBA8888 / RGB888 / RGBA4444 / RGB565 / Index8 / LumA44
Chipset          : STM32L4R9-MB1315
Hardware         : STM32L4R9-MB1315-Evalboard
Operating System : None / FreeRTOS
Software Tree    : STM32Cube_FW_L4 V1.14.0
Compiler/Toolset : GCC / IAR / Keil / TrueSTUDIO
Test Result      : o.k. - 14/11/19 - msy/mli

Version          : 9.30
Platform Package : STM32 - RGB565 / Index8 / LumA44
Chipset          : STM32L496
Hardware         : STM32L496-Discovery
Operating System : None / FreeRTOS
Software Tree    : STM32Cube_FW_L4 V1.14.0
Compiler/Toolset : GCC / IAR / Keil / TrueSTUDIO
Test Result      : o.k. - 14/11/19 - msy/mli

